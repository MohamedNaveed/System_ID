function [H] = build_hankel(alpha_beta,q,t_step,n_cols, nz, nu)

% n_cols is the number of times to take the column. Doesn't mean the exact
% number of columns. 

H = zeros(q*nz, n_cols*(nz + nu)); %hankel

if (k-n_cols <= 0)
    disp('request invalid');
end

for j = 1:n_cols
    for i = 0:q-1

        if t_step<=q

            rows = (t_step + i - 1)*nz + 1: (t_step + i)*nz;

            a_cols = nu + ((t_step-2) + i + j-1)*nz + 1:nu + ((t_step-1) + i + j-1)*nz;

            alpha = alpha_beta(rows, a_cols);

            b_cols = nu + (t_step + i -1)*nz + ((t_step-2) + i + (j-1))*nu + 1:...
                    nu + (t_step + i -1)*nz + ((t_step-1) + i + (j-1))*nu;

            beta = alpha_beta(rows, b_cols);

        else
        end
        H(i*nz + 1: (i-1)*nz,(j-1)*(nu+nz) + 1:j*(nu+nz)) = [alpha, beta];
    end
    
end
end

